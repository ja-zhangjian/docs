# 收集二

## 上海海康威视

预

:::tip 1. 简述四次分手
关于TCP三次握手四次分手，之前看资料解释的都很笼统，很多地方都不是很明白，所以很难记，前几天看的一个博客豁然开朗，可惜现在找不到了。现在把之前的疑惑总结起来，方便一下大家。

先上个TCP三次握手和四次分手的图

网上好多都是错的，只能自己画了，一个正确的图的确可以方便理解。
<img :src="$withBase('/面试/三次握手.jpg')">

<img :src="$withBase('/面试/四次分手.jpg')">

疑问一，上图传递过程中出现的几个字符（SYN, ACK, FIN, seq, ack）各代表什么意思

SYN，ACK，FIN存放在TCP的标志位，一共有6个字符，这里就介绍这三个：

SYN：代表请求创建连接，所以在三次握手中前两次要SYN=1，表示这两次用于建立连接，至于第三次什么用，在疑问三里解答。

FIN：表示请求关闭连接，在四次分手时，我们发现FIN发了两遍。这是因为TCP的连接是双向的，所以一次FIN只能关闭一个方向。

ACK：代表确认接受，从上面可以发现，不管是三次握手还是四次分手，在回应的时候都会加上ACK=1，表示消息接收到了，并且在建立连接以后的发送数据时，都需加上ACK=1, 来表示数据接收成功。

seq: 序列号，什么意思呢？当发送一个数据时，数据是被拆成多个数据包来发送，序列号就是对每个数据包进行编号，这样接受方才能对数据包进行再次拼接。

初始序列号是随机生成的，这样不一样的数据拆包解包就不会连接错了。（例如：两个数据都被拆成1，2，3和一个数据是1，2，3一个是101，102，103，很明显后者不会连接错误）

ack: 这个代表下一个数据包的编号，这也就是为什么第二请求时，ack是seq+1，

(这里要吐槽一下，当初不懂的时候查资料，发现好多地方把ACK和ack都搞混了，害的我被坑了好久...)

如果你仔细看了上面对每个字符的解释，那么相信我画的三次握手和四次分手的图你也就明白了。

再复习一遍　　　　

在创建连接时，

1. 客户端首先要SYN=1, 表示要创建连接，

2. 服务端接收到后，要告诉客户端：我接受到了！所以加个ACK=1，就变成了ACK=1, SYN=1

3. 理论上这时就创建连接成功了，但是要防止一个意外（见疑问三），所以客户端要再发一个消息给服务端确认一下，这时只需要ACK=1就行了。

三次握手完成！

在四次分手时，

1. 首先客户端请求关闭客户端到服务端方向的连接，这时客户端就要发送一个FIN=1，表示要关闭一个方向的连接（见上面四次分手的图）

2. 服务端接收到后是需要确认一下的，所以返回了一个ACK=1

3. 这时只关闭了一个方向，另一个方向也需要关闭，所以服务端也向客户端发了一个FIN=1 ACK=1

4. 客户端接收到后发送ACK=1，表示接受成功

四次分手完成！

我为什么没有在上面的过程中，加入seq和ack呢？就如我对这两个关键字的解释的一样，这两个是数据拆分和组装必备元素，所以所有的请求都需要这两个元素，只要明白了作用，就可以自己举一反三。

关于握手和分手，主要还是SYN, FIN, ACK的变化，这才是重点！

疑问二，每次发送请求时为什么ack要+1

关于seq和ack关键字的解释中已经说明了。

疑问三，为什么需要三次握手

下面解释明明两次就可以建立连接的为什么还要加第三次的确认。

如果发送两次就可以建立连接话，那么只要客户端发送一个连接请求，服务端接收到并发送了确认，就会建立一个连接。

可能出现的问题：如果一个连接请求在网络中跑的慢，超时了，这时客户端会从发请求，但是这个跑的慢的请求最后还是跑到了，然后服务端就接收了两个连接请求，然后全部回应就会创建两个连接，浪费资源！

如果加了第三次客户端确认，客户端在接受到一个服务端连接确认请求后，后面再接收到的连接确认请求就可以抛弃不管了。

疑问四，为什么需要四次分手

TCP是双向的，所以需要在两个方向分别关闭，每个方向的关闭又需要请求和确认，所以一共就4次
:::

:::tip 02. 简述网络编程
ISO/OSI七层模型
:::
:::tip 03. 队列和堆栈的区别
队列，对头队尾

堆栈，先进后出
::: 
:::tip 04. 进程间的通信方式
ipc
:::
:::tip 05. axios的拦截器原理及应用
请求和响应拦截，判断token等等
::: 
:::tip 06. 路由守卫进行判断登录
beforeEnter
:::
:::tip 07. webpack的打包流程
::: 
:::tip 08. vue-router懒加载
()=>import
::: 
:::tip 09. js实现数组数字的快速排序方法
sort

递归快排
::: 
:::tip 10. Promise的状态，三种pending fulfilled rejected
？？？
::: 
:::tip 11. Promise 的理解
::: 
:::tip 12. 箭头函数和普通函数的区别
this指向问题
:::
:::tip 13. ES6新特性
::: 
:::tip 14. Var let const 的区别
作用域
::: 
:::tip 15. 实现继承的几种方式
原型继承

寄生组合继承
:::
:::tip 16. Null 和 undefined 的区别
null 空对象

undefined声明，未赋值
:::
:::tip 17. Call bind apply的区别
call，this，参数一个个

appl 参数一起
 
bind 返回一个方法
:::
:::tip 18. 前端缓存的理解 或者 前端数据持久化的理解
强缓存、协商缓存
::: 
:::tip 19. 防抖和节流
定时器
::: 
:::tip 20. 闭包
内部获取外部参数
::: 
:::tip 21. 数组去重
set，...
::: 
:::tip 22. 深浅拷贝
拷贝地址
::: 
:::tip 23. 原型链
原型三角链
:::
:::tip 24. Require 和 import
commonjs，es6模块化
::: 

CSS
 
:::tip 01. 常见的块级元素和行内块元素，以及它们有何不同
块级元素：p，h，div，from，table，ul

行内块元素：a，img，span，textarea，input 
:::
:::tip 02. 常见选择器
id，class，标签，queryselect
::: 
:::tip 03. px em 和 rem的区别
px：绝对单位，em相对单位（父），rem：root-em，fontsize
::: 
:::tip 04. 水平垂直居中的几种方法
flex，父相子绝
::: 
:::tip 05. 盒模型的理解
box-size, 标准盒模型，边框，内边距，内容
:::
:::tip 06. Flex布局
display：flex；flex：1
::: 
:::tip 07. 怎么解决浮动中塌陷的问题
清除浮动
::: 
:::tip 08. CSS3新特性
canvas
::: 
:::tip 09. 前端常见的布局方式
双飞翼
::: 
HTML

:::tip 01. HTML的语义化标签
seo，机器和人都能读懂
:::
:::tip 02. 前端优化的解决方案
太笼统了
::: 
:::tip 03. HTML5新特性
:::
:::tip 04. 常见的浏览器兼容问题
::: 
Vue

:::tip 01. Vuex
状态管理
:::
:::tip 02. 双向绑定的原理
观察者模式
::: 
:::tip 03. 组件间传递数据
props、$emit自定义事件、eventBUS、vuex、$parent、$root、$children、$attrs、$listeners、ref、provide、inject、
插槽
::: 
:::tip 04. Vue项目优化
:::
:::tip 05. MVVM和MVC
m、v、vm
::: 
:::tip 06. Computed和Watch
计算属性，
::: 
:::tip 07. V-for 和 v-if同时使用的问题
优先级v-for 大于 v-if，先循环再判断，浪费性能；外面嵌套template，v-if判断之后再循环
:::
:::tip 8. 什么时候使用$.nextTick()
第三方插件，需要操作dom
::: 
:::tip 09. 路由的原理
H5api，hashchange，pushstate，replacestate
::: 
:::tip 10. 常用的事件修饰符
lazy，stop，prevent，once，enter，字符编号
::: 
浏览器原理相关
:::tip 01. 常用HTTP请求
get、post、put、patch、delete
::: 
:::tip 02. Get和Post的区别
获取发送
:::
:::tip 03. 跨域的解决办法
jsonp

cors=>access-control-allow-origin

正向代理，反向代理
::: 
:::tip 04. URL输出到页面的全过程
跳转=>缓存=>DNS=>TCP连接=>Request=>Response

浏览器的渲染

网络线程（白名单）=>UI线程（ipc）=>渲染器进程的主线程=>DOM=>STYLE=>layout布局（坐标位置区域）=>paint（绘制顺序表）=>layer=>合成器线程（栅格每个图层，切小图），Frames=>栅格线程，栅格每个图块，生成给合成器

frames通过ipc到浏览器，再通过GPU渲染
::: 
:::tip 05. 常用的请求状态码
1xx：相关信息

2xx：表示成功

3xx：重定向

4xx：客户端错误

5xx：服务端错误，502网关超时
::: 
:::tip 01. 文字在盒子水平垂直居中
text-align: center; 
:::
:::tip 02. 文字在屏幕水平垂直居中
margin: 0 auto; 
:::
:::tip 03. 在电脑，手机，pad端水平垂直居中
父相子绝，left50%，transform，translate-50%
:::
:::tip 04. 访问网站白屏，可能的原因，如果是网络原因怎么办
网络延迟，JS加载延迟

服务端渲染

CDN
::: 
:::tip 05. 十字路口有车，实时显示车的数量
？？？栈数据结构?
:::
:::tip 06. 手机访问一张10g的图片，怎么优化
webp格式，再压缩

切片

帧显示
::: 
:::tip 07. Websocket有用过吗
是一种网络传输协议，可在单个 TCP 链接上进行的全双工通信, 位于 OSI 模型的应用层
::: 
:::tip 08. Webpack用过吗
webpack打包
:::
:::tip 09. 地图有了解过吗
有，argis runtime for js
:::
