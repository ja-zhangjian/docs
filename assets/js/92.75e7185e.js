(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{440:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue-webpack-打造-todo-应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-webpack-打造-todo-应用"}},[t._v("#")]),t._v(" vue+webpack 打造 todo 应用")]),t._v(" "),a("blockquote",[a("p",[t._v("（PS：不含 vue 的脚手架，webpack 版本是 4. X，vue2. X）写在前面，我决定自己来写这个小 demo，因为对着别人的东西做的时候，发生了各种问题，非常痛苦，当然，与工作不一样，我不需要赶时间，所以，我可以慢慢做，同时用各种方式。")])]),t._v(" "),a("p",[t._v("新建文件 vuetodo")]),t._v(" "),a("p",[t._v("文件目录")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Jtodo\n├─ dist\n│  ├─ fonts\n│  │  ├─ checked.svg\n│  │  └─ unChecked.svg\n│  ├─ bg.jpg\n│  ├─ index.html\n│  ├─ main.3efc9cf4.js\n│  ├─ main.e647d16e.css\n│  ├─ manifest.main.1ee16c22.js\n│  └─ vendors.2c31e1e9.js\n├─ src\n│  ├─ assets\n│  │  ├─ images\n│  │  │  ├─ bg.jpg\n│  │  │  ├─ checked.svg\n│  │  │  └─ unChecked.svg\n│  │  └─ styles\n│  │     ├─ footer.styl\n│  │     ├─ global.styl\n│  │     ├─ style.styl\n│  │     └─ test.css\n│  ├─ todo\n│  │  ├─ footer.jsx\n│  │  ├─ header.vue\n│  │  ├─ item.vue\n│  │  ├─ tabs.vue\n│  │  └─ todo.vue\n│  ├─ app.vue\n│  └─ index.js\n├─ .babelrc\n├─ package-lock.json\n├─ package.json\n├─ postcss.config.js\n├─ README.md\n└─ webpack.config.js\n")])])]),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init -y\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i webpack webpack-cli -D\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i vue vue-loader\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i css-loader vue-template-compiler\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i postcss postcss-loader autoprefixer\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -D babel-loader @babel/core @babel/preset-env\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i babel-plugin-transform-vue-jsx -D\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i babel-helper-vue-jsx-merge-props babel-plugin-syntax-jsx -D\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i babel-preset-env\n。。。。。。。\n")])])]),a("p",[t._v("这边就不全写了，package.json 里面有详细的，npm install 一下就行了，需要注意以下几个点")]),t._v(" "),a("p",[t._v("1：vue-loader 需要 css-loader vue-template-compiler，css-loader 又需要 style-loader")]),t._v(" "),a("p",[t._v("2：Vue Loader 的配置和其它的 loader 不太一样。除了通过一条规则将 vue-loader 应用到所有扩展名为 .vue 的文件")]),t._v(" "),a("p",[t._v("上之外，请确保在你的 webpack 配置中添加 Vue Loader 的插件：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" VueLoaderPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-loader/lib/plugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    module"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... 其它规则")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.vue$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请确保引入这个插件！")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VueLoaderPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("这个插件是必须的！ 它的职责是将你定义过的其它规则复制并应用到 .vue 文件里相应语言的块。例如，如果你有一条匹配 /.js$/ 的规则，那么它会应用到 .vue 文件里的 <script> 块。")]),t._v(" "),a("p",[t._v("一个更完整的 webpack 配置示例看起来像这样：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack.config.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" VueLoaderPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-loader/lib/plugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"development"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    module"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.vue$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 它会应用到普通的 `.js` 文件")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 以及 `.vue` 文件中的 `<script>` 块")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.js$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"babel-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 它会应用到普通的 `.css` 文件")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 以及 `.vue` 文件中的 `<style>` 块")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.css$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-style-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请确保引入这个插件来施展魔法")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VueLoaderPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("实际上我测试也是有问题的，下面说一下")]),t._v(" "),a("p",[t._v("style-loader 是作为顶层的 loader 来渲染到 dom 上的，这也就意味着，尽量在处理 css 或者预编译的 loader 的顶层上加上 style-loader。为此我们看一下 webpack 的英文官网，一定要是英文！！！")]),t._v(" "),a("p",[t._v("关于 style-loader 的：")]),t._v(" "),a("p",[t._v("Inject CSS into the DOM(css 注入到 DOM 中)")]),t._v(" "),a("p",[t._v("To begin, you'll need to install style-loader:（导入，这要是看不懂，亲，建议这边回家种红薯）")]),t._v(" "),a("p",[t._v("It's recommended to combine style-loader with the css-loader（推荐这两玩意结合起来用，两粒一起嚼起来才最佳")]),t._v(" "),a("p",[t._v("）")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    module"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.css$/i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"style-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"css-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("你看，webpack，处理 css-loader 就会加上 style-loader，vue-loader 处理 .vue 文件中内部的<style>样式块，只在加了 vue-style-loader，可我在测试中.vue 中内部样式就是不生效，额外加了 style-loader 药到病除，下面黑魔法来了，等我 demo 做完了，我就不信邪，我又去掉了 style-loader，好像有可以显示样式了，说实话，我本是无神论者，现在我相信了，科学的尽头就是玄学。也可能是误操作，菜才能解释这一切。")]),t._v(" "),a("blockquote",[a("p",[t._v("然后简单说一下剩下的 loader, 可能会漏，漏掉的就去找英文文档，英文的，就是那种看着难受的，看懂了很爽的。")])]),t._v(" "),a("p",[t._v("babel=》这个需要三个，loader、core、env（加载器，核心，环境），可能处理 jsx 文件还需要相关的插件，注意@和没@的区别，我看好像版本的问题，具体还是要查，webpack 的 3 和 4 我感觉属于大版本更新，废弃和启用的差别大。")]),t._v(" "),a("p",[t._v("postcss-loader=》搭配 postcss，他们的关系我觉得就是 vue 和 vue-loader 的关系。这个用来处理 css，比如加浏览器前缀，利用 hash 值来达到长缓存。")]),t._v(" "),a("p",[t._v("处理图片的比如 url-loader 和 file-loader 的就不说了，还有 svg 的")]),t._v(" "),a("blockquote",[a("p",[t._v("插件：")])]),t._v(" "),a("p",[t._v("这个在 demo 用的不多，我就举几个我用到的")]),t._v(" "),a("p",[t._v("clean-webpack-plugin=》这个是好东西，打包的时候，清除上一次 dist 里面的文件")]),t._v(" "),a("p",[t._v("html-webpack-plugin=》生成一个 html 当根")]),t._v(" "),a("p",[t._v("mini-css-extract-plugin=》webpack4. X，需要这个插件来提取 css 样式的。")]),t._v(" "),a("blockquote",[a("p",[t._v("webpack 里面的")])]),t._v(" "),a("p",[t._v("config.optimization.splitChunks 这个玩意可以拆包，为了稳定性，我们对于第三方类库几乎不更新，为了长缓存，我们需要把业务代码与第三方类库的代码剥离开来。")]),t._v(" "),a("p",[t._v("hash，入口文件，整个文件的 hash，一旦有个文件改变，值也变，没缓存意义")]),t._v(" "),a("p",[t._v("chunkhash，统一模块的 hash 值，同上")]),t._v(" "),a("p",[t._v("contenthash，文件内容一样，hash 值不一样")]),t._v(" "),a("blockquote",[a("p",[t._v("最后写 README, md 的时候，我在 ie 下跑代码的时候，发现不能运行，我傻了，我忘了 babel 也要配置，不想配置了，正常人谁会用 ie？而且，作为 webpack 核心功能之一，这转移很完善，坑不多~吧~吧~吧~")])]),t._v(" "),a("blockquote",[a("p",[t._v("总结：没啥业务，算是过了一遍 vue 基本语法，模板，事件绑定，父子组件通信的 props 和$emit，手撕了 webpack 最最最基础的东西，基本走了一遍上线的流程。（最简单的那种）现在前端工程化，模块化，我接触有点晚了，慢慢来吧，更新过快是坏事，也是好事。听说 vite 有丶好用")])])])}),[],!1,null,null,null);s.default=e.exports}}]);